
  <div class="container bump-me" ng-controller='VideoresumeController'>

    <div class="body-content">

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Host</h3>
        </div>
        <div class="panel-body">
          <div id="subscribers"><div id="publisher"></div></div>
        </div>
        <div class="panel-footer">
          <a ng-click="startArchive()" class="btn btn-danger">Start archiving</a>
          <a ng-click="stopArchive()" class="btn btn-success stop">Stop archiving</a>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Instructions</h3>
      </div>
      <div class="panel-body">
        <p>
          Click <strong>Start archiving</strong> to begin archiving this session.
          All publishers in the session will be included, and all publishers that
          join the session will be included as well.
        </p>
        <p>
          Click <strong>Stop archiving</strong> to end archiving this session.
          You can then go to <a href="/#!/videoresume/history">past archives</a> to
          view your archive (once its status changes to available).
        </p>
          <table class="table">
            <thead>
              <tr>
                <th>When</th>
                <th>You will see</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="vertical-align: middle;">Archiving is started</td>
                <td>
                  <!-- <img src="img/archiving-on-message.png"></td> -->
              </tr>
              <tr>
                <td style="vertical-align: middle;">Archiving remains on</td>
                <td>
                  <!-- <img src="img/archiving-on-idle.png"></td> -->
              </tr>
              <tr>
                <td style="vertical-align: middle;">Archiving is stopped</td>
                <td>
                  <!-- <img src="img/archiving-off.png"></td> -->
              </tr>
            </tbody>
          </table>
      </div>
    </div>
  </div>

  <script>
      // var sessionId = "<%= sessionId %>";
      // var apiKey = "<%= apiKey %>";
      // var token = "<%= token %>";
  </script>
  <script type="text/javascript">

    window.onload=function() {
      var apiKey = '27381212',
          apiSecret = '49e68ee8e2f8363b736862c56c5489d51c2a25f0',
          token = "T1==cGFydG5lcl9pZD0yNzM4MTIxMiZzaWc9N2EzNjMyNWQxMzZkOGE3ZjU0NDI0ZWFhMjJiYjc5N2Q4YjI3NGUzZDpyb2xlPXB1Ymxpc2hlciZzZXNzaW9uX2lkPTJfTVg0eU56TTRNVEl4TW41LVUyRjBJRXAxYmlBeE5DQXdOam8xT0RveU5pQlFSRlFnTWpBeE5INHdMak0xTXpFeU5ETXlmbjQmY3JlYXRlX3RpbWU9MTQwMjc1NDMwOSZub25jZT0wLjU3MDczMDc4MDgwMjIwMjQmZXhwaXJlX3RpbWU9MTQwMjg0MDcxMA==";
  
      var session = OT.initSession(sessionId),
      publisher = OT.initPublisher('publisher'),
      archiveID = null;

      session.connect(apiKey, token, function(err, info) {
        if(err) {
          alert(err.message || err);
        }
        session.publish(publisher);
      });

      session.on('streamCreated', function(event) {
        session.subscribe(event.stream, 'subscribers', { insertMode: 'append' });
      });
    };
    
  </script>

  </div>

